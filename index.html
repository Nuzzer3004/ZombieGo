<html>
  <head>
 <title>My page title</title>
<style>
#zombie_map {
    height: 100%;
    width: 100%;
    left: 0;
    position: absolute;
    top: 0;
    background-color: grey;
}
</style>
  </head>
  <body>
<div id="zombie_map"></div>

<script>
var zombie_map;
var data = `-33.327089759129414 115.63345448625921 hospital.png
-33.32693872136226 115.6330056675638 hospital.png
-33.32724575424197 115.6340490470302 hospital.png
-33.328074098831756 115.63339109301955 hospital.png
-33.32815477797034 115.6325166928807 hospital.png
-33.328069616655185 115.63187296271713 hospital.png
-33.32770207739292 115.63193197131545 zombie.png
-33.32758052605683 115.63329153294728 zombie.png
-33.32736538010332 115.6329696678655 zombie.png
-33.32673851790017 115.63242701226432 zombie.png
-33.326684730941835 115.632909809887 zombie.png
-33.32663542620086 115.63337651425559 zombie.png
-33.32737947659841 115.63352525706796 zombie.png
-33.327863554168474 115.63350379939584 zombie.png
-33.327168812371596 115.63175499911813 weapons.png
-33.32705675672429 115.6321626948884 weapons.png
-33.32689539633899 115.63253283973245 weapons.png
-33.32698504103438 115.63279569621591 weapons.png
-33.32719122348376 115.63305855269937 weapons.png
-33.32764613885193 115.633007082017 weapons.png
-33.327938512252864 115.63303122189814 weapons.png
-33.327869038382225 115.6326825347262 weapons.png
-33.328115731488005 115.63290606599435 zombie.png
-33.32812019064312 115.63322785832679 zombie.png
-33.32724964627972 115.63246221620057 zombie.png
-33.32755443662857 115.63266069966767 zombie.png
-33.32682713197855 115.63337484541637 hospital.png
-33.326966081325935 115.63325146380168 weapons.png
-33.32691677674416 115.6336859816621 weapons.png`;
var old_position;
var markers = data.split("\n");
all_markers = [];

    function initMap() {

            zombie_map = new google.maps.Map(document.getElementById('zombie_map'), {
            zoom: 10,
            center: {lat: -33.3276 , lng: 115.6330}
        });
	
	if(navigator.geolocation) {
    		navigator.geolocation.watchPosition(set_my_position);
	}
	else {
    		alert("Geolocation doesn't work in your browser");
	}

	for(var i = 0; i < markers.length; i++){
		var marker_data = markers[i].trim();
		    marker_data = marker_data.split(" ");
		var latitude = marker_data[0];
		var longitude = marker_data[1];
		var emoji = marker_data[2];
		var marker_position = new google.maps.LatLng(latitude, longitude);
		var marker = new google.maps.Marker({
  			position: marker_position,
  			map: zombie_map,
			icon: emoji
			});
			all_markers.push(marker);
			}
		old_position = new google.maps.Marker({
		position: {lat: -33.3276 , lng: 115.6330},
		map: zombie_map
		})

function set_my_position(position){
old_position.setMap(null);
var pos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
var marker = new google.maps.Marker({
          position: pos,
          icon: "player.png",
          map: zombie_map
        });
old_position = marker;
}
}
</script>
    <script async defer
  src="https://maps.googleapis.com/maps/api/js?key=AIzaSyACq65pAXHvy4MB5gcbumEHzbRSG1EE1cU&callback=initMap">
</script>
  </body>
</html>
